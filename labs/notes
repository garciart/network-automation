End-of-line (EOL) issues: pexpect.sendline() sends a line feed ("\n") after the text. However, depending on:
The physical port you use to connect to the device (e.g., VTY, Console, etc.)
The protocol (e.g., Telnet, SSH, etc.) or the terminal emulator you use (e.g., PuTTY, Minicom, etc.)
The network port (e.g., 23, 2000, 4000, etc.) or emulation you use (e.g., VT100, VT102, ansi, etc.)
The device may require a carriage return ("\r") before the line feed, creating a CRLF (i.e., pexpect.sendline("text\r")).

Our GNS3 setup uses a form of "Reverse Telnet"; we connect through the GNS3 service's IP address, and



Add an additional Ethernet network interface
Create a bridge and assign the bridge a "gateway" address
Connect the additional Ethernet network interface to the bridge
Bind the GNS3 service to the bridge's IP address


One solution is to edit the terminal emulator's runtime configuration file (telnetrc, minirc, etc), then using the telnet transparent command on the device to change the CRLF setting before running a script. However, you would have to do this each time.


FOR FLASH FORMAT LAB!

When you first configured the router, you gave it a default IOS image (c3745-adventerprisek9-mz.124-25d.bin). However, when the router first starts, it looks for an IOS image in flash memory. This is because the 3745 can store multiple IOS's in flash memory; you tell the router which one you want to use, by inputting ```boot system flash:<the IOS filename>.bin``` at a configuration prompt and saving it in the start-up configuration file. If the router does not find an IOS there, it will look in its Read-Only Memory (ROM) for a default IOS.

Our router will do this because you have not formatted our flash memory, preventing us from uploading another IOS. As a matter of fact, you may see the following error:

```
PCMCIA disk 0 is formatted from a different router or PC. A format in this router is required before an image can be booted from this device
```

In this lab, you will not need another IOS, but you do want to use our flash memory, so let us fix our memory issue, by inputting the following command:

```
format flash:
```

You will be asked to confirm the format operation twice. Press <kbd>Enter</kbd> both times:

```
Format operation may take a while. Continue? [confirm]
Format operation will destroy all data in "flash:".  Continue? [confirm]
```

You should see output similar to the following:

```
Format: Drive communication & 1st Sector Write OK...
Writing Monlib sectors.
.........................................................................................................................
Monlib write complete
..
Format: All system sectors written. OK...

Format: Total sectors in formatted partition: 130911
Format: Total bytes in formatted partition: 67026432
Format: Operation completed successfully.

Format of flash complete

R1#
```

Input ```show flash``` to see what is in the drive:

```
No files on device
66875392 bytes available (0 bytes used)

R1#
```






R1#
R1#write erase
Erasing the nvram filesystem will remove all configuration files! Continue? [confirm]
[OK]
Erase of nvram: complete
R1#
*Mar  1 00:00:24.723: %SYS-7-NV_BLOCK_INIT: Initialized the geometry of nvram
R1#show flash
No files on device

67104768 bytes available (67078144 bytes used)

R1#
*Mar  1 00:00:42.811: %PCMCIAFS-5-DIBERR: PCMCIA disk 0 is formatted from a different router or PC. A format in this router is required before an image can be booted from this device
R1#


lab1_telnet - Connect to the device using Telnet
lab2_get_info - Get the device's information

lab3_reset_device
Reset the device to factory settings
Format the device's flash memory
Set the device's clock

lab4_layer3
Set up Layer 3 connectivity
Verify connectivity

lab5_tftp
Download the device's configuration
Upload a backup configuration

lab6_configuration
Update the startup configuration
Restore the startup configuration

lab6_security
Secure the device



show version | include [IOSios] [Ss]oftware
show inventory | include [Cc]hassis
show version | include [Pp]rocessor [Bb]oard [IDid]

c7200-adventerprisek9-mz.152-4.M8.bin



### Telnet Client

```
which telnet
/usr/bin/telnet
>**NOTE** - If you see ```/usr/bin/which: no telnet```, the client is not installed or loaded. Make sure you installed GNS3 per the instructions in the [Adventures in Automation](../README.md "Adventures in Automation") tutorial.
sudo firewall-cmd --zone=public --add-port=23/tcp

sudo firewall-cmd --zone=public --remove-port=23/tcp
```

### File Transfer Protocol (FTP) Service

```
systemctl status vsftpd
● vsftpd.service - Vsftpd ftp daemon
   Loaded: loaded (/usr/lib/systemd/system/vsftpd.service; disabled; vendor preset: disabled)
   Active: inactive (dead)
>**NOTE** - If you see ```Unit vsftpd.service could not be found.```, the service is not installed or loaded. Make sure you installed GNS3 per the instructions in the [Adventures in Automation](../README.md "Adventures in Automation") tutorial.
sudo firewall-cmd --zone=public --add-port=20/tcp
sudo firewall-cmd --zone=public --add-port=21/tcp
sudo firewall-cmd --zone=public --add-service=ftp
sudo systemctl start vsftpd

sudo systemctl stop vsftpd
sudo firewall-cmd --zone=public --remove-service=ftp
sudo firewall-cmd --zone=public --remove-port=21/tcp
sudo firewall-cmd --zone=public --remove-port=20/tcp
```

### Network Time Protocol (NTP) Service

```
systemctl status ntpd
● ntpd.service - Network Time Service
   Loaded: loaded (/usr/lib/systemd/system/ntpd.service; disabled; vendor preset: disabled)
   Active: inactive (dead)
>**NOTE** - If you see ```Unit ntpd.service could not be found.```, the service is not installed or loaded. Make sure you installed GNS3 per the instructions in the [Adventures in Automation](../README.md "Adventures in Automation") tutorial.
grep "server 127.127.1.0" /etc/ntp.conf
server 127.127.1.0 or echo -e "server 127.127.1.0" | sudo tee -a /etc/ntp.conf
sudo firewall-cmd --zone=public --add-port=123/udp
sudo firewall-cmd --zone=public --add-service=ntp
sudo systemctl start ntpd

sudo systemctl stop ntpd
sudo firewall-cmd --zone=public --remove-service=ntp
sudo firewall-cmd --zone=public --remove-port=123/udp
sudo sed -i '/server 127.127.1.0/d' /etc/ntp.conf
```

### Trivial File Transfer Protocol (TFTP) Service

```
systemctl status tftp
● tftp.service - Tftp Server
   Loaded: loaded (/usr/lib/systemd/system/tftp.service; indirect; vendor preset: disabled)
   Active: inactive (dead)
     Docs: man:in.tftpd
>**NOTE** - If you see ```Unit tftp.service could not be found.```, the service is not installed or loaded. Make sure you installed GNS3 per the instructions in the [Adventures in Automation](../README.md "Adventures in Automation") tutorial.
sudo mkdir --parents --verbose /var/lib/tftpboot
sudo chmod 777 --verbose /var/lib/tftpboot
sudo firewall-cmd --zone=public --add-port=69/udp
sudo firewall-cmd --zone=public --add-service=tftp
sudo systemctl start tftp

sudo firewall-cmd --zone=public --remove-service=tftp
sudo firewall-cmd --zone=public --remove-port=69/udp
sudo systemctl stop tftp
```

### Secure Shell Protocol (SSH) Service

```
systemctl status sshd
● sshd.service - OpenSSH server daemon
   Loaded: loaded (/usr/lib/systemd/system/sshd.service; enabled; vendor preset: enabled)
   Active: active (running) since Sun 2021-11-14 11:46:57 EST; 2h 4min ago
     Docs: man:sshd(8)
           man:sshd_config(5)
 Main PID: 1253 (sshd)
    Tasks: 1
   CGroup: /system.slice/sshd.service
           └─1253 /usr/sbin/sshd -D
>**NOTE** - If you see ```Unit sshd.service could not be found.```, the service is not installed or loaded. Make sure you installed GNS3 per the instructions in the [Adventures in Automation](../README.md "Adventures in Automation") tutorial.
sudo firewall-cmd --zone=public --add-port=22/tcp
sudo firewall-cmd --zone=public --add-service=sshd
sudo systemctl start sshd

sudo firewall-cmd --zone=public --remove-service=sshd
sudo firewall-cmd --zone=public --remove-port=22/tcp
```

### Secure Copy Protocol

```
which scp
/usr/bin/scp
>**NOTE** - If you see ```/usr/bin/which: no scp```, SCP is not installed or loaded. Make sure you installed GNS3 per the instructions in the [Adventures in Automation](../README.md "Adventures in Automation") tutorial.
```